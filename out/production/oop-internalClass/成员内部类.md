# Java成员内部类知识总结

成员内部类是Java中一种重要的内部类类型，定义在另一个类的内部，作为外部类的一个成员存在。以下是成员内部类的主要知识点：

## 基本概念

1. **定义位置**：定义在另一个类的内部，与方法、属性同级
2. **访问权限**：可以使用public、protected、private或默认访问修饰符
3. **实例化**：必须先创建外部类实例，才能创建成员内部类实例

## 语法结构

```java
class OuterClass {
    // 成员变量
    private int outerField;
    
    // 成员内部类
    [public|protected|private] class InnerClass {
        // 内部类成员
        void innerMethod() {
            // 可以访问外部类的成员
            System.out.println(outerField);
        }
    }
}
```

## 特点

1. **访问外部类成员**：
    - 可以直接访问外部类的所有成员（包括private成员）
    - 如果内部类成员与外部类成员同名，可以使用`OuterClass.this.member`访问外部类成员

2. **持有外部类引用**：
    - 每个成员内部类实例都隐式持有一个指向外部类实例的引用
    - 这也是为什么必须先创建外部类实例才能创建内部类实例

3. **访问权限**：
    - 内部类可以声明为private，这样只有外部类可以访问它
    - 声明为public的内部类可以被任何其他类访问（但需通过外部类实例）

## 实例化方式

1. **在外部类内部实例化**：
   ```java
   InnerClass inner = new InnerClass();
   ```

2. **在外部类外部实例化**：
   ```java
   OuterClass outer = new OuterClass();
   OuterClass.InnerClass inner = outer.new InnerClass();
   ```

## 使用场景

1. 当某个类只服务于一个特定类时
2. 需要访问外部类的私有成员时
3. 逻辑上紧密相关的类组织在一起时
4. 实现某些设计模式（如迭代器模式）时

## 注意事项

1. 成员内部类不能定义静态成员（除非是编译时常量）
2. 成员内部类会使外部类变大，可能影响性能
3. 序列化成员内部类时需要注意，因为它们隐式持有外部类引用

## 与静态内部类的区别

1. 成员内部类隐含持有外部类引用，静态内部类不持有
2. 成员内部类不能有静态成员，静态内部类可以
3. 成员内部类实例化需要外部类实例，静态内部类不需要

成员内部类是Java封装性和代码组织的重要机制，合理使用可以提高代码的可读性和维护性。