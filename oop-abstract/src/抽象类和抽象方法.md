# Java `abstract` 关键字全面总结

`abstract` 是 Java 面向对象编程中的核心关键字，用于定义抽象类和抽象方法。以下是关于 `abstract` 的完整知识体系。

## 一、抽象类（Abstract Class）

### 1. 基本定义

- 用 `abstract` 修饰的类
- 不能直接实例化
- 可以包含抽象方法和具体方法

```java
abstract class Animal {
    // 抽象方法
    public abstract void makeSound();
    
    // 具体方法
    public void eat() {
        System.out.println("Animal is eating");
    }
}
```

### 2. 抽象类特点

| 特性   | 说明                            |
|------|-------------------------------|
| 实例化  | 不能直接创建对象 (`new Animal()` 会报错) |
| 构造器  | 可以有构造器（供子类调用）                 |
| 成员变量 | 可以有各种修饰符的变量                   |
| 方法   | 可同时包含抽象方法和具体实现方法              |
| 继承   | 必须通过子类继承实现                    |

### 3. 使用场景

- 定义模板方法模式
- 为相关类提供通用实现
- 强制子类实现特定行为

## 二、抽象方法（Abstract Method）

### 1. 基本定义

- 只有声明没有实现的方法
- 必须用 `abstract` 修饰
- 必须以分号 `;` 结束

```java
abstract void move();
```

### 2. 抽象方法规则

| 规则   | 说明                         |
|------|----------------------------|
| 修饰符  | 不能是 private、static 或 final |
| 所在类  | 必须存在于抽象类或接口中               |
| 实现要求 | 非抽象子类必须实现所有抽象方法            |

### 3. 示例

```java
abstract class Shape {
    abstract double area();  // 抽象方法
    
    void printArea() {       // 具体方法
        System.out.println("Area: " + area());
    }
}

class Circle extends Shape {
    double radius;
    
    @Override
    double area() {          // 必须实现抽象方法
        return Math.PI * radius * radius;
    }
}
```

## 三、抽象类与接口对比

| 特性   | 抽象类              | 接口                       |
|------|------------------|--------------------------|
| 关键字  | `abstract class` | `interface`              |
| 多继承  | 单继承              | 多实现                      |
| 方法   | 可含具体和抽象方法        | Java 8前只有抽象方法            |
| 变量   | 任意类型变量           | 默认 `public static final` |
| 构造器  | 有                | 无                        |
| 默认方法 | Java 8前无         | Java 8+ 有 default 方法     |
| 使用场景 | 代码复用             | 定义契约/API                 |

## 四、抽象类的继承与实现

### 1. 继承规则

- 子类必须实现所有抽象方法（除非子类也是抽象类）
- 可以重写父类具体方法

```java
abstract class Bird extends Animal {
    // 不实现 makeSound()，所以仍是抽象类
    abstract void fly(); 
}

class Sparrow extends Bird {
    @Override
    public void makeSound() { System.out.println("Chirp"); }
    
    @Override
    void fly() { System.out.println("Flying"); }
}
```

### 2. 构造器调用

- 子类构造器必须调用父类构造器（显式或隐式）
- 抽象类构造器用于初始化抽象类状态

```java
abstract class Vehicle {
    private String type;
    
    Vehicle(String type) {  // 抽象类构造器
        this.type = type;
    }
}

class Car extends Vehicle {
    Car() {
        super("Car");  // 必须调用父类构造器
    }
}
```

## 五、设计模式中的应用

### 1. 模板方法模式

```java
abstract class Game {
    abstract void initialize();
    abstract void startPlay();
    abstract void endPlay();
    
    // 模板方法（final防止子类修改算法结构）
    public final void play() {
        initialize();
        startPlay();
        endPlay();
    }
}

class Cricket extends Game {
    void initialize() { /* 实现 */ }
    void startPlay() { /* 实现 */ }
    void endPlay() { /* 实现 */ }
}
```

### 2. 工厂方法模式

```java
abstract class Dialog {
    abstract Button createButton();
    
    void render() {
        Button okButton = createButton();
        okButton.onClick();
        okButton.render();
    }
}

class WindowsDialog extends Dialog {
    Button createButton() {
        return new WindowsButton();
    }
}
```

## 六、抽象类的最佳实践

1. **设计原则**：
    - 抽象类应表示"is-a"关系
    - 抽象层次不宜过深（通常2-3层）

2. **命名规范**：
    - 类名以 `Abstract` 前缀（如 `AbstractList`）
    - 或使用描述性名称（如 `Animal`, `Shape`）

3. **使用建议**：
    - 当需要为相关类提供通用实现时使用
    - 当需要定义模板方法时使用
    - 优先考虑接口（Java 8+ default方法更灵活）

4. **避免滥用**：
    - 不要为了抽象而抽象
    - 如果所有方法都是抽象的，考虑改用接口

## 七、常见面试问题

1. **抽象类可以有构造器吗？**
    - 可以，虽然不能实例化，但子类构造器会调用

2. **抽象类可以实现接口吗？**
    - 可以，且不需要实现接口方法（留给子类）

3. **抽象类可以有main方法吗？**
    - 可以，可以运行但无法直接实例化

4. **final和abstract能一起用吗？**
    - 不能，final类不能被继承，abstract类必须被继承

5. **抽象方法可以是static的吗？**
    - 不能，static方法属于类，abstract方法需要实例化

## 八、Java 8+的变化

1. **接口的default方法**：
    - 减少了抽象类的使用场景
    - 接口现在也能提供方法实现

2. **静态方法**：
    - 抽象类和接口都可以包含静态方法

```java
abstract class AbstractUtil {
    static void helperMethod() { /* 静态方法 */ }
    abstract void process();
}
```

抽象类是Java面向对象设计的重要工具，合理使用可以提高代码的复用性和扩展性，但需要根据实际场景权衡与接口的选择。