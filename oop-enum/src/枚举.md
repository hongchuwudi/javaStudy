# Java枚举类(Enum)全面总结

枚举是Java 5引入的一种特殊类，用于定义固定数量的常量。以下是Java枚举类的完整知识点总结。

## 一、枚举基础

### 1. 基本定义

```java
public enum Season {
    SPRING, SUMMER, AUTUMN, WINTER
}
```

### 2. 本质特点

- 继承自`java.lang.Enum`类
- 默认是final类，不能被继承
- 构造器默认private且只能是private
- 所有枚举值都是public static final的

## 二、枚举的常用方法

### 1. 内置方法

| 方法                | 说明            |
|-------------------|---------------|
| `values()`        | 返回所有枚举值的数组    |
| `valueOf(String)` | 根据名称返回枚举常量    |
| `name()`          | 返回枚举常量的名称     |
| `ordinal()`       | 返回枚举常量的序数(位置) |

```java
Season[] seasons = Season.values();
Season summer = Season.valueOf("SUMMER");
String name = summer.name(); // "SUMMER"
int order = summer.ordinal(); // 1
```

### 2. 示例用法

```java
for (Season season : Season.values()) {
    System.out.println(season);
}
```

## 三、枚举的高级特性

### 1. 自定义属性和方法

```java
public enum Planet {
    MERCURY(3.303e+23, 2.4397e6),
    VENUS(4.869e+24, 6.0518e6);
    
    private final double mass;   // in kilograms
    private final double radius; // in meters
    
    Planet(double mass, double radius) {
        this.mass = mass;
        this.radius = radius;
    }
    
    public double surfaceGravity() {
        return G * mass / (radius * radius);
    }
}
```

### 2. 实现接口

```java
public interface Command {
    void execute();
}

public enum Operation implements Command {
    START {
        public void execute() { /* 启动操作 */ }
    },
    STOP {
        public void execute() { /* 停止操作 */ }
    };
}
```

### 3. 枚举中添加抽象方法

```java
public enum Operation {
    PLUS {
        public double apply(double x, double y) { return x + y; }
    },
    MINUS {
        public double apply(double x, double y) { return x - y; }
    };
    
    public abstract double apply(double x, double y);
}
```

## 四、枚举的设计模式应用

### 1. 单例模式

```java
public enum Singleton {
    INSTANCE;
    
    public void doSomething() {
        // 单例方法
    }
}
```

### 2. 策略模式

```java
public enum Calculator {
    ADD {
        public int calculate(int a, int b) { return a + b; }
    },
    SUBTRACT {
        public int calculate(int a, int b) { return a - b; }
    };
    
    public abstract int calculate(int a, int b);
}
```

## 五、枚举与集合的配合

### 1. EnumSet

```java
EnumSet<Season> seasons = EnumSet.allOf(Season.class);
EnumSet<Season> warmSeasons = EnumSet.of(Season.SPRING, Season.SUMMER);
```

### 2. EnumMap

```java
EnumMap<Season, String> seasonMap = new EnumMap<>(Season.class);
seasonMap.put(Season.SUMMER, "Hot");
```

## 六、枚举的序列化

- 枚举的序列化机制特殊，仅序列化名称
- 反序列化时通过valueOf方法查找
- 天然防止反射攻击

## 七、枚举的最佳实践

1. **命名规范**：
    - 全大写字母，下划线分割单词
    - 如`HTTP_STATUS_CODE`

2. **使用场景**：
    - 固定集合的常量（状态、类型等）
    - 需要类型安全的常量
    - 替代传统的常量接口模式

3. **注意事项**：
    - 不要滥用枚举，适合有限集合的场景
    - 枚举值不宜过多（影响性能）
    - 优先使用枚举而非int常量

## 八、枚举的性能考虑

- 枚举比常量更占内存（每个常量是一个对象）
- 方法调用比整数常量慢
- 但现代JVM优化后差异很小

## 九、Java 8+对枚举的增强

### 1. Lambda表达式结合

```java
public enum Operation {
    PLUS((x, y) -> x + y),
    MINUS((x, y) -> x - y);
    
    private final DoubleBinaryOperator op;
    
    Operation(DoubleBinaryOperator op) {
        this.op = op;
    }
    
    public double apply(double x, double y) {
        return op.applyAsDouble(x, y);
    }
}
```

### 2. Stream API支持

```java
Arrays.stream(Season.values())
      .filter(s -> s.name().startsWith("S"))
      .forEach(System.out::println);
```

枚举是Java中强大的特性，合理使用可以使代码更安全、更清晰、更易维护。